<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2019"><meta name="DC.rights.owner" content="(C) Copyright 2019"><meta name="DC.type" content="concept"><meta name="description" content="PDK uses a default template to configure modules. You can customize this configuration by specifying your own custom template or by customizing specific template settings."><meta name="DC.creator" content="Jean Bond <jean@puppet.com&gt;"><meta name="DC.format" content="HTML5"><meta name="DC.identifier" content="concept-270"><link rel="stylesheet" type="text/css" href="commonltr.css"><title>Customizing your module configuration</title></head><body><main role="main"><article role="article" aria-labelledby="ariaid-title1"><article class="nested0" aria-labelledby="ariaid-title1" id="concept-270"><h1 class="title topictitle1" id="ariaid-title1">Customizing your module configuration</h1><div class="body conbody"><p class="shortdesc"> <span class="ph">PDK</span> uses a default template to configure modules. You can customize this configuration by specifying your own custom template or by customizing specific template settings.</p><section class="section"><h2 class="title sectiontitle">Specifying a custom template</h2><p class="p">You can specify a custom template when creating a new module or when converting an existing module.</p><p class="p">Fork the default template from the <a class="xref" href="https://github.com/puppetlabs/pdk-templates" target="_blank">pdk-template</a> project on <span class="ph">GitHub</span>, and make any changes you need. If you must change the Gemfile or Rakefile, do so carefully and test your changes. Major changes to the Gemfile or Rakefile of the default template can cause errors with <span class="ph">PDK</span>.</p><div class="p">Run either the <code class="ph codeph">pdk convert</code> or the <code class="ph codeph">pdk new module</code> command with the <code class="ph codeph">--template-url</code> option. For example:<pre class="pre codeblock console"><code>pdk convert --template-url https://github.com/myrepo/custom-module-template</code></pre> </div></section><section class="section"><h2 class="title sectiontitle">Customizing the default template</h2><p class="p">You can customize the default template on an existing module, whether you created it with <span class="ph">PDK</span> or you are converting it to <span class="ph">PDK</span>.&nbsp;To customize a new module, first create the module with <span class="ph">PDK</span>, and then apply any changes you want to the template.</p><p class="p">To customize the default template, create a <code class="ph codeph">.sync.yml</code> file in your module. This file must be in the top directory of the module and must be in a valid YAML format. When you convert or update a module, <span class="ph">PDK</span> reads the <code class="ph codeph">.sync.yml</code> file and applies those changes to the relevant files.</p><p class="p">In the <code class="ph codeph">sync.yml</code> file, specify the file you want to manage with a top-level key, such as <code class="ph codeph">appveyor.yml</code>. Then add keys, indented two spaces, to change configuration of that file. For example:</p><div class="p"><ul class="ul"><li class="li"><p class="p">Setting <code class="ph codeph">delete: true</code> deletes the named file, even if it is supplied through the module template.</p></li><li class="li"><p class="p">Setting <code class="ph codeph">unmanaged: true</code> ignores the the named file, even if it is supplied through the module template.</p></li><li class="li"><p class="p">To see a complete updated list of <code class="ph codeph">sync.yml</code> settings, see the <a class="xref" href="https://github.com/puppetlabs/pdk-templates/blob/master/README.md" target="_blank"> <code class="ph codeph">pdk-template</code> README</a>.</p></li></ul></div><div class="p">For example, this <code class="ph codeph">.sync.yml</code> file removes the <code class="ph codeph">appveyor.yml</code> file from the module. It also changes the Travis CI configuration to use <span class="ph">Ruby</span> version 2.1.9 and to run the command <code class="ph codeph">bundle exec rake rubocop</code> as the test script in the module.<pre class="pre codeblock"><code>appveyor.yml:
  delete: true
.travis.yml:
  extras:
  -rvm: 2.1.9
   script: bundle exec rake rubocop</code></pre> </div></section></div><article class="topic task nested1" aria-labelledby="ariaid-title2" id="task-9225"><h2 class="title topictitle2" id="ariaid-title2">Update a module with template changes</h2><div class="body taskbody"><p class="shortdesc">Update your module to keep it current with <span class="ph">PDK</span> or custom module template changes.&nbsp;</p><div class="section prereq p"><div class="tasklabeltitle tasklabel">Before you begin</div><p class="p">Ensure that the module you are updating is compatible with <span class="ph">PDK</span> version 1.3.0 or later.&nbsp;If the module was created with versions of <span class="ph">PDK</span> earlier than 1.3.0, convert the module to the current template with the pdk convert command. See the page about <a class="xref" href="en_pdk_converting_modules.html#concept-6618" title="You can convert an existing module to a standardized PDK module with an infrastructure for testing it. This allows you to use all the capabilities of PDK with your module.">converting modules</a> for more information.&nbsp;</p></div><section class="section context"><p class="p">The&nbsp;<code class="ph codeph">pdk update</code> function&nbsp;updates your module based on the template you used when you created or converted your module. If there have been any changes to that template, <span class="ph">PDK</span> updates your module to incorporate them.</p><p class="p">To check for template changes without making changes, run <code class="ph codeph">update</code> with the <code class="ph codeph">--noop</code> option. This option runs the command in "no operation" mode, which shows what changes would be made, but doesn't actually make them.</p></section><ol class="ol steps"><li class="li step"> <span class="ph cmd">From the command line, change into the module's directory with <code class="ph codeph">cd &lt;MODULE_NAME&gt;</code> </span> </li><li class="li step"> <span class="ph cmd">Run the update command: <code class="ph codeph">pdk update</code> </span> </li><li class="li step"> <span class="ph cmd">If any module metadata is missing, respond to <span class="ph">PDK</span> prompts to provide metadata information.</span> </li><li class="li step"> <span class="ph cmd">Confirm the change summary <span class="ph">PDK</span> displays and either continue or cancel the update.&nbsp;</span> </li></ol><section class="section result"><p class="p">Whether you confirm or cancel changes, <span class="ph">PDK</span> generates a detailed change report, <code class="ph codeph">update_report.txt</code>, in the top directory of the module. This report is updated every time you run the <code class="ph codeph">update</code> command.</p><p class="p">If you confirm changes, <span class="ph">PDK</span> applies the reported changes to the module.</p></section></div></article></article></article></main></body></html>