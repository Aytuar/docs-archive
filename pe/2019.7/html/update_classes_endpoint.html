<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2020"><meta name="DC.rights.owner" content="(C) Copyright 2020"><meta name="DC.type" content="concept"><meta name="description" content="Use update classes endpoint to trigger the node classifier to update class and environment definitions from the Puppet master."><meta name="prodname" content="pe"><meta name="version" content="2019.7"><meta name="DC.format" content="HTML5"><meta name="DC.identifier" content="update_classes_endpoint"><link rel="stylesheet" type="text/css" href="commonltr.css"><title>Update classes endpoint</title></head><body><main role="main"><article role="article" aria-labelledby="ariaid-title1"><article class="nested0" aria-labelledby="ariaid-title1" id="update_classes_endpoint">
    <h1 class="title topictitle1" id="ariaid-title1">Update classes endpoint </h1>
    
    <div class="body conbody"><p class="shortdesc">Use update classes endpoint to trigger the node classifier
        to update class and environment definitions from the <span class="ph">Puppet</span> master. </p></div>
<article class="topic reference nested1" aria-labelledby="ariaid-title2" id="post_v1_update_classes">
    <h2 class="title topictitle2" id="ariaid-title2">POST /v1/update-classes </h2>
    
    <div class="body refbody"><p class="shortdesc">Use the <code class="ph codeph">/v1/update-classes</code> endpoint to trigger the node classifier to update class and
        environment definitions from the <span class="ph">Puppet</span> master. The
        classifier service uses this endpoint when you refresh classes in the console.</p>
        <section class="section"><div class="p"><div class="note note note_note"><span class="note__title">Note:</span> If you don't use <span class="ph">Code Manager</span>
                    <em class="ph i">and</em> you changed the default value of the
                        <code class="ph codeph">environment-class-cache-enabled</code> server setting, you must <a class="xref" href="https://puppet.com/docs/puppetserver/latest/admin-api/v1/environment-cache.html" target="_blank">manually delete the environment cache</a> before using
                    this endpoint.</div></div></section>
        <section class="section" id="post_v1_update_classes__query_parameters"><h3 class="title sectiontitle">Query
                parameters </h3><p class="p">The request accepts the following optional
                parameter:</p><table class="table"><caption></caption><colgroup><col><col></colgroup><thead class="thead">
                        <tr class="row">
                            <th class="entry" id="post_v1_update_classes__query_parameters__entry__1">Parameter </th>
                            <th class="entry" id="post_v1_update_classes__query_parameters__entry__2">Value</th>
                        </tr>
                    </thead><tbody class="tbody">
                        <tr class="row">
                            <td class="entry" headers="post_v1_update_classes__query_parameters__entry__1"><code class="ph codeph">environment</code></td>
                            <td class="entry" headers="post_v1_update_classes__query_parameters__entry__2">If provided, fetches
                                classes for only the specified environment.</td>
                        </tr>
                    </tbody></table><p class="p">For
            example:</p><pre class="pre codeblock ruby"><code>curl -X POST https://localhost:4433/classifier-api/v1/update-classes?environment=production
--cert &lt;PATH TO CERT&gt;
--key &lt;PATH TO KEY&gt;
--cacert &lt;PATH TO PUPPET CA CERT&gt;</code></pre></section>
        <section class="section" id="post_v1_update_classes__response"><h3 class="title sectiontitle">Response
                </h3><p class="p">For a successful update, the service returns a <code class="ph codeph">201</code> response with an empty
            body.</p></section>
        <section class="section" id="post_v1_update_classes__error_responses"><h3 class="title sectiontitle">Error
                responses </h3><p class="p">If the <span class="ph">Puppet</span>
                master returns an unexpected status to the node classifier, the service returns a
                    <code class="ph codeph">500: Server Error</code> response with
                the following keys:</p><table class="table"><caption></caption><colgroup><col><col></colgroup><thead class="thead">
                        <tr class="row">
                            <th class="entry" id="post_v1_update_classes__error_responses__entry__1">Key </th>
                            <th class="entry" id="post_v1_update_classes__error_responses__entry__2">Definition</th>
                        </tr>
                    </thead><tbody class="tbody">
                        <tr class="row">
                            <td class="entry" headers="post_v1_update_classes__error_responses__entry__1"><code class="ph codeph">kind</code>
                            </td>
                            <td class="entry" headers="post_v1_update_classes__error_responses__entry__2">"unexpected-response"</td>
                        </tr>
                        <tr class="row">
                            <td class="entry" headers="post_v1_update_classes__error_responses__entry__1"><code class="ph codeph">msg</code>
                            </td>
                            <td class="entry" headers="post_v1_update_classes__error_responses__entry__2">Describes the error</td>
                        </tr>
                        <tr class="row">
                            <td class="entry" headers="post_v1_update_classes__error_responses__entry__1"><code class="ph codeph">details</code>
                            </td>
                            <td class="entry" headers="post_v1_update_classes__error_responses__entry__2">A JSON object, which has
                                    <code class="ph codeph">url</code>, <code class="ph codeph">status</code>, <code class="ph codeph">headers</code>, and <code class="ph codeph">body</code> keys describing
                                the response the classifier received from the <span class="ph">Puppet</span> master</td>
                        </tr>
                    </tbody></table></section>
    </div>
<nav role="navigation" class="related-links"><div class="linklist relinfo"><strong>Related information</strong><br><ul class="linklist"><li class="linklist"><a class="link" href="config_puppetserver.html#enable_or_disable_environment_class_cache_enabled" title="The optional environment-class-cache-enabled setting specifies whether cached data is used when updating classes in the console. When true, Puppet Server refreshes classes using file sync, improving performance.">Enable or disable cached data when updating classes</a></li></ul></div></nav></article></article></article></main></body></html>