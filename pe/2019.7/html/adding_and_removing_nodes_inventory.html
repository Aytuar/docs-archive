<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2020"><meta name="DC.rights.owner" content="(C) Copyright 2020"><meta name="DC.type" content="concept"><meta name="description" content="Using the inventory, you can manage nodes, including devices such as network switches or firewalls, without installing the Puppet agent on them. The inventory stores node and device information securely."><meta name="prodname" content="pe"><meta name="version" content="2019.7"><meta name="DC.creator" content="Kate Lopresti <kate.lopresti@puppet.com&gt;"><meta name="DC.format" content="HTML5"><meta name="DC.identifier" content="adding_and_removing_nodes_inventory"><link rel="stylesheet" type="text/css" href="commonltr.css"><title>Adding and removing agentless nodes</title></head><body><main role="main"><article role="article" aria-labelledby="ariaid-title1"><article class="nested0" aria-labelledby="ariaid-title1" id="adding_and_removing_nodes_inventory">
                          <h1 class="title topictitle1" id="ariaid-title1">Adding and removing agentless nodes</h1>
                          
                          
                          <div class="body conbody"><p class="shortdesc">Using the inventory, you can manage
                                                  nodes, including devices such as network switches
                                                  or firewalls, without installing the <span class="ph">Puppet</span> agent on them.
                                                  The inventory stores node and device information
                                                  securely. </p>
                                                  <p class="p">The inventory connects to
                                                  agentless nodes through SSH or WinRM remote
                                                  connections. The inventory uses transport
                                                  definitions from installed device modules to
                                                  connect to devices that can't have an agent
                                                  installed on them.</p>
                                                  <p class="p">After you add credentials to
                                                  the inventory, authorized users can run tasks on
                                                  these nodes and devices without re-entering
                                                  credentials. On the <span class="ph uicontrol">Tasks</span> page, these
                                                  nodes and devices appear in the same list of
                                                  targets as those that have agents installed.</p>
                          </div>
<article class="topic task nested1" aria-labelledby="ariaid-title2" id="add_nodes_to_inventory">
    <h2 class="title topictitle2" id="ariaid-title2">Add agentless nodes to the inventory</h2>
    
    
    <div class="body taskbody"><p class="shortdesc">Add nodes over SSH or WinRM that will not or cannot have the <span class="ph">Puppet</span> agent installed to the inventory so you can run tasks
        on them. </p>
        <section class="section prereq" id="add_nodes_to_inventory__prereq_ntd_c23_3hb"><div class="tasklabeltitle tasklabel">Before you begin</div>
            <p class="p">Add classes to the <span class="ph uicontrol">PE Master</span> node group for each agent platform used in your
                environment. For example, <code class="ph codeph">pe_repo::platform::el_7_x86_64</code>.</p>
            <p class="p" id="add_nodes_to_inventory__p_ufh_kyy_jkb">Make sure you have the permission <span class="ph uicontrol">Nodes: Add and delete
                    connection information from inventory service</span>.</p>
        </section>
        <section><ol class="ol steps"><li class="li step" id="add_nodes_to_inventory__step_nf4_kyy_jkb">
                <span class="ph cmd">In the console, click <span class="ph uicontrol">Inventory</span>.</span>
            </li><li class="li step" id="add_nodes_to_inventory__step_zmt_kyy_jkb">
                <span class="ph cmd">Click <span class="ph uicontrol">Connect over SSH or WinRM</span>.</span>
            </li><li class="li step" id="add_nodes_to_inventory__step_cfz_kyy_jkb">
                <span class="ph cmd">Select a transport method.</span>
                <ul class="ul choices" id="add_nodes_to_inventory__choices_eh2_351_3hb">
                    <li class="li choice"><span class="ph uicontrol">SSH</span> for <span class="ph">*nix</span>
                        targets</li>
                    <li class="li choice"><span class="ph uicontrol">WinRM</span> for <span class="ph">Windows</span>
                        targets</li>
                </ul>
            </li><li class="li step" id="add_nodes_to_inventory__step_w2g_lyy_jkb">
                <span class="ph cmd">Enter target host names and the credentials required to access them. If you use
                    an SSH key, include begin and end tags.</span>
            </li><li class="li step" id="add_nodes_to_inventory__step_qr5_lyy_jkb"><strong>Optional: </strong>
                <span class="ph cmd">Select additional target options. For example, to add a target port number,
                    select <span class="ph uicontrol">Target Port </span> from the drop-down list, enter the
                    number, and click <span class="ph uicontrol">Add</span>. For details, see <a class="xref" href="adding_and_removing_nodes_inventory.html#transport_configuration_options" title="A list of transport configuration options for SSH and WinRM transports.">Transport configuration options</a>.</span>
            </li><li class="li step" id="add_nodes_to_inventory__step_jnz_lyy_jkb">
                <span class="ph cmd">Click <span class="ph uicontrol">Add nodes</span>. </span>
            </li></ol></section>
        <section class="section result" id="add_nodes_to_inventory__result_xjv_14g_3hb"><div class="tasklabeltitle tasklabel">Result:</div>After the nodes have
            been added to the inventory, they are added to <span class="ph">PuppetDB</span>,
            and you can view them from the <span class="ph uicontrol">Nodes</span> page. Nodes in the inventory can be added to an inventory node
            list when you set up a job to run tasks. To review each inventory node's connection
            options, or to remove the node from inventory, go to the <span class="ph uicontrol">Connections</span> tab on the node's details page. </section>
    </div>
</article><article class="topic reference nested1" aria-labelledby="ariaid-title3" id="transport_configuration_options">
  <h2 class="title topictitle2" id="ariaid-title3">Transport configuration options</h2>
  
  
  <div class="body refbody"><p class="shortdesc">A list of transport configuration options for SSH and WinRM
    transports. </p>
    <section class="section" id="transport_configuration_options__section_g3z_bdd_qhb"><h3 class="title sectiontitle">Target options for SSH transport</h3>
      
      <table class="table frame-all" id="transport_configuration_options__table_dyy_ddd_qhb"><caption></caption><colgroup><col style="width:50%"><col style="width:50%"></colgroup><thead class="thead">
            <tr class="row">
              <th class="entry colsep-1 rowsep-1" id="transport_configuration_options__table_dyy_ddd_qhb__entry__1">Option</th>
              <th class="entry colsep-1 rowsep-1" id="transport_configuration_options__table_dyy_ddd_qhb__entry__2">Definition</th>
            </tr>
          </thead><tbody class="tbody">
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_dyy_ddd_qhb__entry__1"><span class="ph uicontrol">Target
                  port</span></td>
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_dyy_ddd_qhb__entry__2">Connection port. Default is <code class="ph codeph">22</code>.</td>
            </tr>
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_dyy_ddd_qhb__entry__1"><span class="ph uicontrol">Connection
                  time-out in seconds</span></td>
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_dyy_ddd_qhb__entry__2">The length of time <span class="ph">PE</span>
                should wait when establishing connections.</td>
            </tr>
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_dyy_ddd_qhb__entry__1"><span class="ph uicontrol">Run as
                  another user</span></td>
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_dyy_ddd_qhb__entry__2">After login, the user name to use for running
                commands.</td>
            </tr>
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_dyy_ddd_qhb__entry__1"><span class="ph uicontrol">Temporary
                  directory</span></td>
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_dyy_ddd_qhb__entry__2">The directory to use when uploading temporary files to
                the target.</td>
            </tr>
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_dyy_ddd_qhb__entry__1"><span class="ph uicontrol">Sudo
                  password</span></td>
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_dyy_ddd_qhb__entry__2">Password to use when changing users via <code class="ph codeph">run-as</code>.</td>
            </tr>
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_dyy_ddd_qhb__entry__1"><span class="ph uicontrol">Process
                  request as tty</span></td>
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_dyy_ddd_qhb__entry__2">Enable text terminal allocation. </td>
            </tr>
          </tbody></table>
    </section>
    <section class="section" id="transport_configuration_options__section_ufy_mgd_qhb"><h3 class="title sectiontitle">Target options for WinRM transport</h3>
      
      <table class="table frame-all" id="transport_configuration_options__table_vfy_mgd_qhb"><caption></caption><colgroup><col style="width:50%"><col style="width:50%"></colgroup><thead class="thead">
            <tr class="row">
              <th class="entry colsep-1 rowsep-1" id="transport_configuration_options__table_vfy_mgd_qhb__entry__1">Option</th>
              <th class="entry colsep-1 rowsep-1" id="transport_configuration_options__table_vfy_mgd_qhb__entry__2">Definition</th>
            </tr>
          </thead><tbody class="tbody">
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_vfy_mgd_qhb__entry__1"><span class="ph uicontrol">Target
                  port</span></td>
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_vfy_mgd_qhb__entry__2">Connection port. Default is <code class="ph codeph">5986</code>, or <code class="ph codeph">5985</code> if <code class="ph codeph">ssl:
                false</code></td>
            </tr>
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_vfy_mgd_qhb__entry__1"><span class="ph uicontrol">Connection
                  time-out in seconds</span></td>
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_vfy_mgd_qhb__entry__2">The length of time <span class="ph">PE</span>
                should wait when establishing connections.</td>
            </tr>
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_vfy_mgd_qhb__entry__1"><span class="ph uicontrol">Temporary
                  directory</span></td>
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_vfy_mgd_qhb__entry__2">The directory to use when uploading temporary files to
                the target.</td>
            </tr>
            <tr class="row">
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_vfy_mgd_qhb__entry__1"><span class="ph uicontrol">Acceptable
                  file extension</span></td>
              <td class="entry colsep-1 rowsep-1" headers="transport_configuration_options__table_vfy_mgd_qhb__entry__2">List of file extensions that are accepted for scripts or
                tasks. Scripts with these file extensions rely on the target node's file type
                association to run. For example, if Python is installed on the system, a <code class="ph codeph">.py</code> script should run with <code class="ph codeph">python.exe</code>. The extensions .<code class="ph codeph">ps1</code>, <code class="ph codeph">.rb</code>, and <code class="ph codeph">.pp</code> are always allowed and run via hard-coded executables.</td>
            </tr>
          </tbody></table>
    </section>
  </div>
</article><article class="topic task nested1" aria-labelledby="ariaid-title4" id="add-devices-to-inventory">
    <h2 class="title topictitle2" id="ariaid-title4">Add devices to the inventory</h2>
    
    
    <div class="body taskbody"><p class="shortdesc">If you have installed modules for device transports in
        your production environment, you can add connections to those devices to your inventory.
        This lets you manage network devices such as switches and firewalls, and run Puppet and task
        jobs on them, just like other agentless nodes in your infrastructure.</p>
        <section class="section prereq"><div class="tasklabeltitle tasklabel">Before you begin</div><p class="p">Make sure you have the
                permission <span class="ph uicontrol">Nodes: Add and delete
                    connection information from inventory service</span>.</p></section>
        <section class="section context">
            <div class="p">The connection details differ for each type of device transport,
                as defined in the module; see the device module's README for details.<div class="note caution note_caution"><span class="note__title">CAUTION:</span> This initial implementation of network device
                    configuration management is limited in how many device connections it can
                    handle. Managing more than 100 devices can cause performance issues on the
                    master. We plan to gather feedback from this release and improve the scaling and
                    performance capabilities. In the meantime, avoid impacting master performance by
                    limiting the number of network device connections you make to 100.</div></div>
        </section>
        <section><ol class="ol steps"><li class="li step">
                <span class="ph cmd">In the console, click <span class="ph uicontrol">Inventory</span>.</span>
            </li><li class="li step">
                <span class="ph cmd">Click <span class="ph uicontrol">Connect network devices</span>.</span>
            </li><li class="li step">
                <span class="ph cmd">Select a device type from the list of device
                    transports that you have installed as modules in your production
                    environment.</span>
            </li><li class="li step">
                <span class="ph cmd">Enter the device certname and other connection
                    details, as defined in the transport module. Mandatory fields are marked with an
                    asterisk. See the module README file if you need more details or examples
                    specific to the transport. </span>
            </li><li class="li step">
                <span class="ph cmd">Click <span class="ph uicontrol">Add node</span>.</span>
            </li></ol></section>
        <section class="section result"><div class="tasklabeltitle tasklabel">Result:</div>After devices have been added to the inventory,
            they are added to <span class="ph">PuppetDB</span>, and you can view them from
            the <span class="ph uicontrol">Nodes</span> page. Devices in the
            inventory can be added to an inventory node list when you set up a job to run tasks. To
            review each inventory device's connection options, or to remove the device from
            inventory, go to the <span class="ph uicontrol">Connections</span> tab on the device's node details page.</section>
    </div>
</article><article class="topic task nested1" aria-labelledby="ariaid-title5" id="remove_nodes_from_inventory">
        <h2 class="title topictitle2" id="ariaid-title5">Remove agentless nodes and devices from the inventory</h2>
        
        
        <div class="body taskbody"><p class="shortdesc">Remove an agentless node or device connection from the
                inventory from the <span class="ph uicontrol">Connections</span> tab on its details page. </p>
                <section class="section prereq" id="remove_nodes_from_inventory__prereq_ntd_c23_3hb"><div class="tasklabeltitle tasklabel">Before you begin</div>
                        <p class="p">Make sure you have the permission <span class="ph uicontrol">Nodes: Add and delete connection
                                        information from inventory service</span>.</p>
                </section>
                <section class="section context"></section>
                <section><ol class="ol steps"><li class="li step">
                                <span class="ph cmd">On the <span class="ph uicontrol">Overview</span> or
                                                <span class="ph uicontrol">Nodes</span> page, find the node or device
                                        whose connection you want to remove, and click its name to
                                        open its details page. </span>
                        </li><li class="li step">
                                <span class="ph cmd">Click <span class="ph uicontrol">Connections</span>.</span>
                        </li><li class="li step">
                                <span class="ph cmd">Click <span class="ph uicontrol">Remove connection</span>. The
                                        exact name of the link varies depending on the connection
                                        type: <span class="ph uicontrol">Remove
                                                SSH Connection</span>, <span class="ph uicontrol">Remove WinRM
                                                connection</span>, or similar.</span>
                        </li><li class="li step">
                                <span class="ph cmd">Confirm that you want to remove
                                        the connection.</span>
                        </li></ol></section>
                <section class="section result" id="remove_nodes_from_inventory__result_cqb_pj3_3hb"><div class="tasklabeltitle tasklabel">Result:</div>When you remove
                        a node or device connection from the inventory, <span class="ph">PuppetDB</span> marks it as expired after the
                        standard node time-to-live (<code class="ph codeph">node-ttl</code>) and then purges the node when it reaches its
                        node-purge time-to-live limit (<code class="ph codeph">node-purge-ttl</code>). At this point the node no longer appears
                        in the console, and the node's license is available for use.<div class="note tip note_tip"><span class="note__title">Tip:</span> For more information about <code class="ph codeph">node-ttl</code> and <code class="ph codeph">node-purge-ttl</code>
                                settings, see the <span class="ph">PE</span> docs for <a class="xref" href="https://puppet.com/docs/puppetdb/latest/configure.html#database-settings" target="_blank">database settings</a>.</div></section>
        </div>
<nav role="navigation" class="related-links"><div class="linklist relinfo"><strong>Related information</strong><br><ul class="linklist"><li class="linklist"><a class="link" href="node_inventory_api.html#node_inventory_api" title="These are the endpoints for the node inventory v1 API.">Node inventory API</a></li></ul></div></nav></article></article></article></main></body></html>